---
import Layout from '@/layouts/Layout.astro'
import { RateCoffeePage } from '@/components/coffees/RateCoffeePage'

export const prerender = false

// Validate coffeeId parameter (UUID format)
const { id } = Astro.params

const UUID_REGEX = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i

if (!id || !UUID_REGEX.test(id)) {
  return Astro.redirect('/404')
}
---

<Layout title="Oceń kawę">
  <RateCoffeePage client:load coffeeId={id} />
</Layout>
